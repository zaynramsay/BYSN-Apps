---
import DeviceMockup from './DeviceMockup.astro';

interface Feature {
  step: number;
  title: string;
  description: string;
  highlights: string[];
  screenshot: string;
}

interface Props {
  features: Feature[];
}

const { features } = Astro.props;
---

<section class="feature-sections py-24 px-6" id="how-it-works">
  <div class="max-w-[1100px] mx-auto">
    <div class="text-center mb-20">
      <div class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-brand/10 border border-brand/20 mb-6">
        <span class="text-brand text-xs font-semibold tracking-wide uppercase">How It Works</span>
      </div>
      <h2 class="text-white font-extrabold tracking-tighter mb-4 section-title-fitme">
        Simple as <span class="text-brand">1-2-3</span>
      </h2>
      <p class="text-text-body text-lg max-w-[500px] mx-auto">
        Three simple steps to never forget a birthday again.
      </p>
    </div>

    <div class="space-y-32">
      {features.map((feature, index) => (
        <div class:list={[
          'feature-row flex flex-col gap-12 items-center scroll-fade',
          index % 2 === 0 ? 'lg:flex-row' : 'lg:flex-row-reverse',
        ]}>
          <!-- Text Side -->
          <div class="flex-1 max-w-[480px]">
            <div class="flex items-center gap-3 mb-6">
              <span class="w-10 h-10 rounded-full bg-brand text-white text-sm font-bold flex items-center justify-center shrink-0">
                {feature.step}
              </span>
              <div class="h-px flex-1 bg-gradient-to-r from-brand/30 to-transparent" />
            </div>

            <h3 class="text-white font-bold text-2xl md:text-3xl tracking-tight mb-4">
              {feature.title}
            </h3>

            <p class="text-text-body leading-relaxed mb-8">
              {feature.description}
            </p>

            <ul class="space-y-4">
              {feature.highlights.map((item) => (
                <li class="flex items-start gap-3">
                  <div class="w-5 h-5 rounded-full bg-brand/20 flex items-center justify-center shrink-0 mt-0.5">
                    <svg class="w-3 h-3 text-brand" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7" />
                    </svg>
                  </div>
                  <span class="text-text-body text-sm">{item}</span>
                </li>
              ))}
            </ul>
          </div>

          <!-- Mockup Side -->
          <div class="flex-1 flex justify-center">
            <div class="relative">
              <!-- Background glow behind phone -->
              <div class="absolute inset-0 -z-10 flex items-center justify-center">
                <div class="w-[300px] h-[300px] rounded-full bg-brand/5 blur-[80px]" />
              </div>
              <DeviceMockup screenshot={feature.screenshot} alt={feature.title} />
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .section-title-fitme {
    font-size: clamp(2rem, 5vw, 3.5rem);
  }
</style>
