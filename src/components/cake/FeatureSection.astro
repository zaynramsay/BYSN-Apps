---
import DeviceMockup from './DeviceMockup.astro';

interface Feature {
  step: number;
  title: string;
  description: string;
  highlights: string[];
  mockupContent: string;
}

interface Props {
  features: Feature[];
}

const { features } = Astro.props;
---

<section class="feature-sections py-20 px-6" id="how-it-works">
  <div class="max-w-[1100px] mx-auto">
    <div class="text-center mb-20">
      <h2 class="text-white font-extrabold tracking-tighter mb-4 section-title-fitme">
        How It <span class="text-brand">Works</span>
      </h2>
      <p class="text-text-body text-lg max-w-[500px] mx-auto">
        Three simple steps to never forget a birthday again.
      </p>
    </div>

    <div class="space-y-32">
      {features.map((feature, index) => (
        <div class:list={[
          'feature-row flex flex-col gap-12 items-center scroll-fade',
          index % 2 === 0 ? 'lg:flex-row' : 'lg:flex-row-reverse',
        ]}>
          <!-- Text Side -->
          <div class="flex-1 max-w-[480px]">
            <div class="flex items-center gap-3 mb-4">
              <span class="w-10 h-10 rounded-full bg-brand text-white text-sm font-bold flex items-center justify-center shrink-0">
                {feature.step}
              </span>
              <div class="h-px flex-1 bg-gradient-to-r from-brand/30 to-transparent" />
            </div>

            <h3 class="text-white font-bold text-2xl md:text-3xl tracking-tight mb-4">
              {feature.title}
            </h3>

            <p class="text-text-body leading-relaxed mb-6">
              {feature.description}
            </p>

            <ul class="space-y-3">
              {feature.highlights.map((item) => (
                <li class="flex items-start gap-3">
                  <svg class="w-5 h-5 text-brand shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                  </svg>
                  <span class="text-text-body text-sm">{item}</span>
                </li>
              ))}
            </ul>
          </div>

          <!-- Mockup Side -->
          <div class="flex-1 flex justify-center">
            <DeviceMockup>
              <div class="w-full h-full bg-gradient-to-b from-surface-card to-black flex flex-col items-center justify-center p-6">
                <div class="text-4xl mb-3">{feature.mockupContent}</div>
                <div class="text-white font-semibold text-sm mb-1">{feature.title}</div>
                <div class="text-text-muted text-xs text-center px-4">{feature.description.slice(0, 60)}...</div>

                <!-- Progress indicator -->
                <div class="flex gap-2 mt-6">
                  {features.map((_, i) => (
                    <div class:list={[
                      'w-2 h-2 rounded-full transition-all',
                      i === index ? 'bg-brand w-6' : 'bg-white/20',
                    ]} />
                  ))}
                </div>
              </div>
            </DeviceMockup>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .section-title-fitme {
    font-size: clamp(2rem, 5vw, 3.5rem);
  }
</style>
